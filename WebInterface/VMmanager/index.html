<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta charset="utf-8">
		<title>VM Management</title>
		<meta name="generator" content="Bootply" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<!--[if lt IE 9]>
			<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<link href="css/styles.css" rel="stylesheet">
	</head>
	<body>
<div class="page-container">
  
	<!-- top navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    	<div class="navbar-header">
           <button type="button" class="navbar-toggle" data-toggle="offcanvas" data-target=".sidebar-nav">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
           </button>
           <a class="navbar-brand" href="#">nist's IaaS</a>
    	</div>
    </nav>
      
    <div class="container-fluid">
      <div class="row row-offcanvas row-offcanvas-left">
        
        <!--sidebar-->
        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
          <div data-spy="affix" data-offset-top="45" data-offset-bottom="90">
            <ul class="nav" id="sidebar-nav">
              <li><a href="#">Home</a></li>
              <li><a href="#overview">Service Overview</a></li>
              <li><a href="#how-to-use">How to use</a></li>
              <li><a href="#about">About us</a></li>
            </ul>
           </div>
        </div><!--/sidebar-->
  	
        <!--/main-->
        <div class="col-xs-12 col-sm-9" data-spy="scroll" data-target="#sidebar-nav">
          <div class="row">
           	 <div class="col-sm-6">

<!--Create VM-->
                <div class="well"> 
                     <form class="form-horizontal" role="form">
                      <h4>Create your VMs</h4><span style="color:#555555;">今すぐ Web サービスを作ってみよう！</span>
                       <div class="form-group" style="padding:14px;">
          <input type="text" id="VMname" class="form-control input-lg" placeholder="VM name">
                      </div>
                      <button id="createButton" class="btn btn-success pull-right" type="button" style="margin-top: -1em;">Create</button><ul class="list-inline"><li><a href="#"><i class="glyphicon glyphicon-align-left"></i></a></li><li><a href="#"><i class="glyphicon glyphicon-align-center"></i></a></li><li><a href="#"><i class="glyphicon glyphicon-align-right"></i></a></li></ul>

                    </form>
                </div><!--/well-->

<!--List of VMs-->
                <div class="panel panel-default">
                  <div class="panel-heading"><a href="#" class="pull-right" id="deleteButton">Delete</a> <h4>Your VMs</h4></div>
                    <div class="panel-body">
                      <div class="list-group" id="vmList">
現在、あなたの管理する VM はありません。
                      </div>
                    </div><!--/panel-body-->
                </div><!--/panel-->
             
             
            </div><!--/col-->
            
            <div class="col-sm-6">
        
<!--利用状況-->
              <div class="panel panel-default">
                 <div class="panel-heading"><a href="#" class="pull-right">View all</a> <h4>Status</h4></div>
                  <div class="panel-body">

                    <h5>VM 1</h5>
                    <div class="progress">
                      <div class="progress-bar progress-bar-info" style="width: 20%"></div>
                    </div>

                    <h5>VM 2</h5>
                    <div class="progress">
                      <div class="progress-bar progress-bar-success" style="width: 40%"></div>
                    </div>

                    <h5>VM 3</h5>
                    <div class="progress">
                      <div class="progress-bar progress-bar-warning" style="width: 80%"></div>
                    </div>

                    <h5>VM 4</h5>
                    <div class="progress">
                      <div class="progress-bar progress-bar-danger" style="width: 50%"></div>
                    </div>
                    
                  </div><!--/panel-body-->
              </div><!--/panel-->
              
<!--料金プラン-->
              <div class="panel panel-default">
                 <div class="panel-heading"><a href="#" class="pull-right">View all</a> <h4>Recommended Plan</h4></div>
                  <div class="panel-body">
      
                      <ul class="nav nav-tabs">
                        <li class="active"><a href="#A" data-toggle="tab">Plan A</a></li>
                        <li><a href="#B" data-toggle="tab">Plan B</a></li>
                        <li><a href="#C" data-toggle="tab">Plan C</a></li>
                      </ul>
                      <div class="tabbable">
                        <div class="tab-content">
                          <div class="tab-pane active" id="A">
                            <div class="well well-sm">You use Plan A now.</div>
                          </div>
                          <div class="tab-pane" id="B">
                            <div class="well well-sm">Plan B is ...</div>
                          </div>
                          <div class="tab-pane" id="C">
                            <div class="well well-sm">Plan C is ...</div>
                          </div>
                        </div>
                      </div> <!-- /tabbable -->
                                        
                  </div><!--/panel-body-->
               </div> <!--/panel-->

              </div><!--/col-->
          </div><!--/row-->
    
          <h1 id="overview">Service Overview</h1>
          <p>本サービスは、お客様がこの上なく簡単に Web サイトを公開することを可能とするサービスです。</p>
<p></p>

<hr></hr>
          <h1 id="how-to-use">How to use</h1>
          <p>本サービスの利用手順は以下の通りです。</p>
<ol>
  <li>VM の名前を入力する。</li>
  <li>Create ボタンを押す。</li>
</ol>

<p>上記の手順によって VM が起動し、Web サービスが開始します。起動した Web サイトを閲覧するためには、"Your VMs" に表示されている IP アドレス、およびポート番号にアクセスします。</p>

<p>各 VM における Web 機能のご利用状況は、"Status" に反映されています。また、そのご利用状況に応じて、私たちがオススメする料金プランを "Recommended Plan" に表示しております。ぜひご活用ください。</p>

<p>本サービスの利用を停止したい場合、"Your VMs" 上部の Delete ボタンを押していただき、停止する VM 名を入力していただくと可能です。</p>

<hr></hr>
          <h1 id="about">About us</h1>
<p><img src="img/t-tanaka.jpg" class="img-circle pull-right" style="margin-right: 20px;">私たちのチーム名 nist はチームメンバーの頭文字、"N"gatomi Ken, "I"mai Tomoki, "S"akamoto Koki, "T"anaka Tatsuya に由来しています。</p>

        </div><!--/.col-xs-12-->
      </div><!--/.row-->
    </div>
  </div><!--/.container-->
</div><!--/.page-container-->
  
<footer><!--footer-->
  <div class="container">
      	<div class="row">
Team nist All Rights Reserved.
		</div><!--/row-->
    </div><!--/container-->
</footer>
        
	<!-- script references -->
		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/scripts.js"></script>
<script type="text/javascript" src="/socket.io/socket.io.js"></script>
<script>
var socket = io.connect();
var vmNames = [];
var vmNumber = 0;

$("#createButton").click(function(){
  var vmName = $("#VMname").val();
  alert('Virtual Machine "'+vmName+'" が作成されました。');
  socket.emit('create', vmName);
  vmNames.push(vmName);
  vmNumber++;

  // Your VMs の中身を編集
  if(vmNumber == 1) {
    var vmList = document.getElementById('vmList');
    vmList.innerHTML = "";
    var li = document.createElement('a');
    li.textContent = vmName;
    li.setAttribute('href','#');
    li.setAttribute('class','list-group-item active');
    li.setAttribute('id','vm-list-'+vmName);
    vmList.appendChild(li);
  } else {
    if(vmNumber % 2 == 1) {
    var vmList = document.getElementById('vmList');
    var li = document.createElement('a');
    li.textContent = vmName;
    li.setAttribute('href','#');
    li.setAttribute('class','list-group-item active');
    li.setAttribute('id','vm-list-'+vmName);
    vmList.appendChild(li);
    } else {
    var vmList = document.getElementById('vmList');
    var li = document.createElement('a');
    li.textContent = vmName;
    li.setAttribute('href','#');
    li.setAttribute('class','list-group-item');
    li.setAttribute('id','vm-list-'+vmName);
    vmList.appendChild(li);
    }
  }

  // 中身のクリア
  document.getElementById('VMname').value = "";
});

$("#deleteButton").click(function(){
  var vmName = window.prompt("削除する VM の名前を入力してください。","");
  if(vmNames.indexOf(vmName) >= 0) {
    alert('Virtual Machine "'+vmName+'" が削除されました。');
    socket.emit('delete', vmName);
    var vmList = document.getElementById('vmList');
    var vm = document.getElementById('vm-list-'+vmName);
    // 1 個ずつ active をずらす
    for(var i=vmNames.indexOf(vmName); i<vmList.children.length; i++) {
      if(i % 2 == 1) {
        vmList.children[i].setAttribute('class','list-group-item active');
      } else {
        vmList.children[i].setAttribute('class','list-group-item');
      }
    }
    vmList.removeChild(vm);
    var nm = vmNames.indexOf(vmName);
    vmNames.splice(nm,1);
    vmNumber--;
    if(vmNumber == 0) {
      vmList.innerHTML = "現在、あなたの管理する VM はありません。";
    }
  } else {
    alert("現在、あなたの管理する VM にその名前の VM はありません。もう一度入力してください。");
  }
});


</script>

	</body>
</html>
